# 武器外部养成等级设计 v2.4

> 参考：向僵尸开炮（Survivor.io）
> 外部养成线（武器商店），花金币升级，永久生效

---

## 一、统一节奏（30级满，解锁即Lv1）

| 等级 | 类型 |
|------|------|
| 普通级 | 📈 伤害系数提升 + 暴伤 |
| **5的倍数** | ⭐ 爽点属性提升（**不加伤害**）+ 暴伤 |
| **2, 10, 18** | 📈 伤害 + 🎰 解锁1个战斗三选一选项 |
| **6, 14, 22, 26, 30** | 📈 伤害 + 🌟 解锁永久被动 |

### 完整节奏表

| Lv | 伤害 | 暴伤 | 额外 |
|----|------|------|------|
| 1 | 📈 | ✅ | 🔓 获得武器 |
| **2** | 📈 | ✅ | **🎰 解锁选项 #1** |
| 3 | 📈 | ✅ | |
| 4 | 📈 | ✅ | |
| **5** | ❌ | ✅ | **⭐ 爽点属性** |
| **6** | 📈 | ✅ | **🌟 被动 #1** |
| 7 | 📈 | ✅ | |
| 8 | 📈 | ✅ | |
| 9 | 📈 | ✅ | |
| **10** | ❌ | ✅ | **⭐ 爽点 + 🎰 选项 #2** |
| 11 | 📈 | ✅ | |
| 12 | 📈 | ✅ | |
| 13 | 📈 | ✅ | |
| **14** | 📈 | ✅ | **🌟 被动 #2** |
| **15** | ❌ | ✅ | **⭐ 爽点属性** |
| 16 | 📈 | ✅ | |
| 17 | 📈 | ✅ | |
| **18** | 📈 | ✅ | **🎰 解锁选项 #3** |
| 19 | 📈 | ✅ | |
| **20** | ❌ | ✅ | **⭐ 爽点属性** |
| 21 | 📈 | ✅ | |
| **22** | 📈 | ✅ | **🌟 被动 #3** |
| 23 | 📈 | ✅ | |
| 24 | 📈 | ✅ | |
| **25** | ❌ | ✅ | **⭐ 爽点属性** |
| **26** | 📈 | ✅ | **🌟 被动 #4** |
| 27 | 📈 | ✅ | |
| 28 | 📈 | ✅ | |
| 29 | 📈 | ✅ | |
| **30** | ❌ | ✅ | **⭐ 爽点 + 🌟 被动 #5（终极）** |

---

## 二、数值成长（所有武器统一曲线）

### 暴击伤害（全局叠加，每级必给）

| 等级段 | 每级 | 总累计 |
|--------|------|--------|
| 1-5 | +1% | 5% |
| 6-10 | +2% | 15% |
| 11-15 | +3% | 30% |
| 16-20 | +4% | 50% |
| 21-30 | +5% | **100%** |

单武器满级=+100%暴伤，11个全满=+1100%暴伤

### 伤害系数（基于武器初始basePct，5倍数级不加）

| 等级段 | 每级增幅 |
|--------|----------|
| 1-5 | +10%×基础 |
| 6-10 | +15%×基础 |
| 11-15 | +20%×基础 |
| 16-20 | +25%×基础 |
| 21-30 | +30%×基础 |

**满级 = 6.1倍初始伤害**

### 各武器爽点属性（5倍数级，不加伤害）

| 武器 | 爽点属性 | 初始 | 每5级 | 满级 |
|------|----------|------|-------|------|
| 💣 光能寒冰弹 | CD | 2700ms | -150ms | 1800ms |
| ⚡ 闪电链 | 链数 | 3链 | +1链 | 9链 |
| 🎯 穿甲弹 | 穿透数 | 5穿 | +1穿 | 11穿 |
| ✈ 轰炸机 | 投弹数 | 4弹 | +1弹 | 10弹 |
| 🤖 战术无人机 | 射击间隔 | 450ms | -30ms | 270ms |
| 🌀 回旋刃 | 持续时间 | 10s | +0.5s | 13s |
| ☢ 白磷弹 | 燃烧时间 | 3s | +0.5s | 6s |
| ⊕ 离子射线 | 射击时间 | 2s | +0.3s | 3.8s |
| ❄ 寒冰发生器 | 冰墙数量 | 2墙 | +1墙 | 8墙 |
| 🕳 奇点引擎 | 黑洞持续 | 3s | +0.5s | 6s |
| ✈ 飞机 | 射速 | 基础 | +8% | +48% |

---

## 三、武器完整机制（重点审核）

> 每个武器包含：基础效果 → 默认分支（战斗内直接可选）→ 商店解锁选项（3个）→ 商店被动（5个）

---

### 💣 光能寒冰弹 (kunai)
**basePct 2.0 | CD 2700ms | 伤害类型：🔥火焰伤害 | Ch1解锁**

**基础效果**：发射炮弹命中爆炸，范围AOE火焰伤害

**默认分支**（战斗内直接可选）：
| 分支 | 名称 | 效果 | 最大等级 |
|------|------|------|----------|
| damage | 伤害 | +50%基础伤害 | 10 |
| count | 弹数 | +1发炮弹，每发伤害-20%（2发×80%, 3发×60%, 4发×40%） | 3 |
| aoe | 爆炸范围 | +30%爆炸半径，弹体变大 | 3 |
| pierce | 穿透 | 炮弹穿透砖块+1，每穿1个伤害衰减20% | 2 |
| pierceBlast | 穿透爆炸 | 每次穿透都爆炸（需pierce:2） | 1 |

> count：1发100% → 2发×80%=160% → 3发×60%=180% → 4发×40%=160%（3级是陷阱，配合Lv6被动解除）
> pierce：穿1个80% → 穿2个60% → 穿3个40%（配合Lv26被动解除衰减）

**商店解锁选项**（到等级后加入三选一池）：
| 商店Lv | 解锁分支 | 效果 |
|--------|----------|------|
| **2** | 连锁爆炸 | 击杀砖块也爆炸（初始爆炸伤害-50%，每级+50%，max 2，满级=150%爆炸伤害） |
| **10** | 分裂弹 | 爆炸后产生2个小寒冰弹各25%伤（每级+1个，max 3，满级4个小弹） |
| **18** | 巨型弹头 | 弹体+爆炸范围翻倍（max 1） |

**商店被动**（永久生效）：
| 商店Lv | 效果 |
|--------|------|
| **6** | 🌟 **弹数不减伤**：count分支不再降低每发伤害（4发×100%=400%！） |
| **14** | 🌟 **灼烧引爆**：爆炸对受灼烧效果的砖块额外+50%伤害 |
| **22** | 🌟 **燃烧弹头**：巨型弹头有20%概率灼烧砖块3秒 |
| **26** | 🌟 **穿透不衰减**：穿透不再降低伤害 |
| **30** | 🌟 **末日弹幕**：炮弹发射数×2 |
---

### ⚡ 闪电链 (lightning)
**basePct 1.5 | CD 3000ms | 伤害类型：⚡雷电伤害 | 初始3链 | Ch1解锁**

**基础效果**：自动锁定砖块释放闪电，链式跳跃多个目标，每跳伤害衰减

**默认分支**（战斗内直接可选）：
| 分支 | 名称 | 效果 | 最大等级 |
|------|------|------|----------|
| damage | 伤害 | +50%基础伤害 | 10 |
| chains | 链数 | +1跳跃目标 | 4 |
| charge | 蓄能 | 每次链跳+25%伤害（需chains:2） | 2 |
| shock | 感电 | 命中留DOT(20%/秒×2秒)（需damage:2） | 2 |
| echo | 回响 | 链末端20%概率再次释放（需chains:3） | 2 |

**商店解锁选项**（到等级后加入三选一池）：
| 商店Lv | 解锁分支 | 效果 |
|--------|----------|------|
| **2** | 麻痹 | 命中减速30%（max 2，需chains:2） |
| **10** | 雷暴 | 同时释放2道闪电（max 2） |
| **18** | 超载 | 链末端爆炸AOE（max 1，需chains:4,damage:3） |

**商店被动**（永久生效）：
| 商店Lv | 效果 |
|--------|------|
| **6** | 🌟 **感电标记**：被闪电命中的砖块受伤+15% |
| **14** | 🌟 **残留电场**：链末端留电场持续伤害2秒 |
| **22** | 🌟 **链不衰减**：跳跃不再降低伤害 |
| **26** | 🌟 **双链释放**：同时释放2道闪电 |
| **30** | 🌟 **雷神降临**：每30秒自动全屏闪电 |
---

### 🎯 穿甲弹 (missile)
**basePct 8.0 | CD 2500ms | 5穿透 | 衰减15%/穿 | Ch1解锁**

**基础效果**：飞机侧翼发射，固定向上贯穿整列砖块，每穿一个衰减15%伤害

**默认分支**：
| 分支 | 名称 | 效果 | 最大等级 |
|------|------|------|----------|
| damage | 穿甲强化 | +50%基础伤害，弹体变大 | 5 |
| pierce | 贯穿 | 穿透衰减-15%(15%→0%) | 2 |
| salvo | 连射 | +1发连射(同列间隔200ms) | 3 |
| dotExploit | 烈性反应 | 对有DOT砖块每层+20%伤害（需damage:2） | 3 |
| shockwave | 冲击波 | 穿透时横向溅射50%伤害（需damage:2,pierce:1） | 2 |
| twinCannon | 双管炮 | 左右侧翼各一管（需salvo:2） | 2 |

**商店解锁选项**：
| 商店Lv | 解锁分支 | 效果 |
|--------|----------|------|
| **2** | 深度贯穿 | +3穿透数(5→8→11)（max 2） |
| **10** | 超速弹 | 每穿一个+20%伤害，电磁蓝光特效（max 1） |
| **18** | 双管炮升级 | 双管各自独立瞄准不同列（max 1） |

**商店被动**：
| 商店Lv | 效果 |
|--------|------|
| **6** | 🌟 **碎甲标记**：命中降防10%持续3秒 |
| **14** | 🌟 **穿透不衰减**：穿透不再降低伤害 |
| **22** | 🌟 **穿透+3**：基础穿透数额外+3 |
| **26** | 🌟 **冲击波强化**：溅射伤害从50%→100% |
| **30** | 🌟 **毁灭穿甲**：穿透10个后触发全列爆炸 |

---

### ✈ 轰炸机 (meteor)
**basePct 6.0 | CD 8000ms | 4弹 | Ch1解锁**

**基础效果**：轰炸机横穿屏幕，自动选最密集y行，沿途投弹地毯轰炸

**默认分支**：
| 分支 | 名称 | 效果 | 最大等级 |
|------|------|------|----------|
| damage | 装药强化 | +50%炸弹伤害 | 5 |
| bombs | 载弹量 | +2颗炸弹/次出击 | 3 |
| radius | 爆破范围 | +25%爆炸半径 | 3 |
| napalm | 凝固汽油 | 落点留燃烧区域DOT 3秒（需damage:2） | 2 |
| carpet | 地毯轰炸 | 飞行路径变宽上下各多一行（需bombs:2） | 2 |

**商店解锁选项**：
| 商店Lv | 解锁分支 | 效果 |
|--------|----------|------|
| **2** | 护航编队 | +1架僚机同时出击，上下错开（max 2） |
| **10** | 燃烧风暴 | 燃烧区域合并扩大+50%伤害（max 1） |
| **18** | 战略轰炸 | 巨型机，弹数×2+范围×1.5+屏震（max 1） |

**商店被动**：
| 商店Lv | 效果 |
|--------|------|
| **6** | 🌟 **燃烧弹**：所有炸弹命中留火区2秒 |
| **14** | 🌟 **凝固汽油**：火焰区域扩展为带状 |
| **22** | 🌟 **焦土策略**：火焰区域持续时间×3 |
| **26** | 🌟 **双波次轰炸**：每次出击轰炸机飞两遍 |
| **30** | 🌟 **核弹**：最后1颗炸弹替换为核弹，范围×3伤害×5 |

---

### 🤖 战术无人机 (drone)
**basePct 1.2 | 射击间隔 450ms | Ch10解锁**

**基础效果**：无人机布阵，全连接激光网切割砖块（2台1线→3台3线△→4台6线◇→5台10线★），智能追踪高权重砖块

**默认分支**：
| 分支 | 名称 | 效果 | 最大等级 |
|------|------|------|----------|
| damage | 伤害 | +50%激光伤害 | 5 |
| count | 阵列 | +1台(2→3△→4◇→5★) | 3 |
| speed | 机动 | 阵型移动+tick频率提升30% | 3 |
| width | 光束 | 激光变粗+判定+40%（需damage:2） | 2 |
| deploy | 部署 | 阵型半径+25,追踪更准（需count:1） | 2 |
| overcharge | 过载 | 阵型中心交叉点伤害×2（需count:2,damage:3） | 1 |

**商店解锁选项**：
| 商店Lv | 解锁分支 | 效果 |
|--------|----------|------|
| **2** | 电弧 | 激光线释放电弧扩大范围（max 2） |
| **10** | 聚焦 | 对低HP砖额外+80%伤害（max 2） |
| **18** | 脉冲 | 每4秒阵型AOE爆发×4（max 1） |

**商店被动**：
| 商店Lv | 效果 |
|--------|------|
| **6** | 🌟 **能量护盾**：每15秒给玩家1层护盾 |
| **14** | 🌟 **过载模式**：血量<30%时伤害×2 |
| **22** | 🌟 **交叉火力**：激光交叉点伤害+30% |
| **26** | 🌟 **矩阵扩展**：无人机上限+2台 |
| **30** | 🌟 **歼灭模式**：激光宽度×2+判定翻倍 |

---

### 🌀 回旋刃 (spinBlade)
**basePct 0.8/tick | CD 8000ms | tick 200ms | Ch15解锁**

**基础效果**：发射旋刃冲顶后横向清扫，弹墙反弹，持续10秒，默认贯穿所有接触砖块。持续型冷却（全消失后才CD）

**默认分支**：
| 分支 | 名称 | 效果 | 最大等级 |
|------|------|------|----------|
| damage | 伤害 | +50%基础伤害 | 5 |
| duration | 续航 | +2秒存在时间 | 3 |
| giant | 巨型化 | 旋刃变大+判定范围↑ | 3 |
| pierce | 锋锐 | 贯穿伤害+30%（需damage:2） | 1 |
| shockwave | 回旋斩 | 弹墙时释放环形刀气波（需damage:2） | 2 |
| ramp | 蓄势 | 存活每秒+12%伤害（需duration:2） | 3 |
| linger | 滞留 | 结束后原地旋转2秒（需duration:2,giant:1） | 2 |

**商店解锁选项**：
| 商店Lv | 解锁分支 | 效果 |
|--------|----------|------|
| **2** | 撕裂 | 命中留流血DOT(15%/秒×2秒)（max 2） |
| **10** | 分裂 | 结束后分裂2个小旋刃（max 2） |
| **18** | 超级旋刃 | 华丽特效+伤害频率翻倍（max 1） |

**商店被动**：
| 商店Lv | 效果 |
|--------|------|
| **6** | 🌟 **锋锐**：贯穿伤害额外+30% |
| **14** | 🌟 **加速旋转**：每存活1秒伤害+10% |
| **22** | 🌟 **回旋斩**：弹墙释放环形刀气波 |
| **26** | 🌟 **不灭旋刃**：消失后50%概率重生 |
| **30** | 🌟 **永恒之刃**：旋刃不再自动消失 |

---

### ☢ 白磷弹 (blizzard)
**basePct 1.0 | CD 7000ms | Ch25解锁**

**基础效果**：从天而降的白磷弹，落地燃烧引燃周边砖块，产生持续燃烧区域tick伤害

**默认分支**：
| 分支 | 名称 | 效果 | 最大等级 |
|------|------|------|----------|
| damage | 伤害 | +50%燃烧伤害 | 5 |
| radius | 范围 | +25%燃烧半径 | 3 |
| duration | 持续 | +1.5秒燃烧时间 | 3 |
| count | 弹数 | +1发白磷弹（需freq:1→改为默认） | 2 |
| frostbite | 腐蚀 | 附加持续伤害DOT（需damage:2） | 2 |

**商店解锁选项**：
| 商店Lv | 解锁分支 | 效果 |
|--------|----------|------|
| **2** | 灼烧 | 燃烧区内砖块下移减速15%（max 3） |
| **10** | 引燃 | 火焰蔓延+结束时爆燃（max 2） |
| **18** | 烈焰 | 燃烧频率提升（max 1） |

**商店被动**：
| 商店Lv | 效果 |
|--------|------|
| **6** | 🌟 **白磷弹+1**：每次多发射1颗 |
| **14** | 🌟 **火焰蔓延**：燃烧可引燃相邻砖块 |
| **22** | 🌟 **腐蚀强化**：DOT伤害翻倍 |
| **26** | 🌟 **燃烧频率×2**：tick速度翻倍 |
| **30** | 🌟 **白磷地狱**：燃烧区域永不熄灭 |

---

### ⊕ 离子射线 (ionBeam)
**basePct 3.2 | CD 4500ms | Ch40解锁**

**基础效果**：锁定最强目标（HP最高）持续射击，标记叠加增伤，蓄能首击有爆发倍率

**默认分支**：
| 分支 | 名称 | 效果 | 最大等级 |
|------|------|------|----------|
| damage | 伤害 | +50%射线伤害 | 5 |
| duration | 持续 | +1秒射击时间 | 3 |
| mark | 标记 | 每次命中+1层，每层+8%伤害（需damage:1） | 3 |
| pierce | 穿透 | 射线穿透打击后方目标（需damage:2） | 2 |
| split | 分裂 | 命中点溅射周围敌人（需duration:1） | 2 |
| overload | 过载 | 射击结束时AOE爆炸（需damage:3,duration:2） | 2 |

**商店解锁选项**：
| 商店Lv | 解锁分支 | 效果 |
|--------|----------|------|
| **2** | 蓄能 | 首击爆发×(2.5+1.5×等级)（max 2） |
| **10** | 离子球 | 蓄能释放超级离子球，巨额伤害+击退（max 2） |
| **18** | 棱镜阵列 | 射线分叉为多方向（max 2） |

**商店被动**：
| 商店Lv | 效果 |
|--------|------|
| **6** | 🌟 **过载标记**：叠满3层触发小爆炸 |
| **14** | 🌟 **聚能模式**：持续命中同目标每秒+10%伤 |
| **22** | 🌟 **穿透射线**：射线穿透所有目标 |
| **26** | 🌟 **分裂溅射**：命中点溅射周围敌人 |
| **30** | 🌟 **毁灭射线**：持续5秒后触发贯穿全屏一击 |

---

### ❄ 寒冰发生器 (frostStorm)
**basePct 40.0（冰墙HP）| CD 6000ms | Ch55解锁**

**基础效果**：生成冰晶屏障（冰墙），砖块撞击冰墙互相消耗HP完成伤害。通用5层冰缓体系：碰撞叠加冰缓层数，即时碰撞，列融合

**默认分支**：
| 分支 | 名称 | 效果 | 最大等级 |
|------|------|------|----------|
| damage | 强化 | +50%冰墙HP | 5 |
| freeze | 冻结 | 撞墙每tick多叠1层冰缓(加速叠满) | 2 |
| count | 数量 | 场上+1面墙(2→3→4)（需freq:1→改为默认） | 2 |
| frostArmor | 寒霜护甲 | 撞墙+1冰缓/级,碰撞伤害+30%/级（需stack:1） | 3 |
| aura | 寒气场 | 冰墙周围80px范围叠冰缓（需freeze:2） | 2 |

**商店解锁选项**：
| 商店Lv | 解锁分支 | 效果 |
|--------|----------|------|
| **2** | 叠甲 | 叠加上限+1倍，叠加触发冰冻脉冲（max 2） |
| **10** | 冰封 | 冰缓满5层触发冻结(1s+0.5s/级)（max 2） |
| **18** | 碎冰 | 碎裂时AOE溅射(maxHP×50%伤害)（max 2） |

**商店被动**：
| 商店Lv | 效果 |
|--------|------|
| **6** | 🌟 **冰缓强化**：撞墙每tick多叠1层冰缓 |
| **14** | 🌟 **寒气场**：冰墙周围80px自动叠冰缓 |
| **22** | 🌟 **永冻**：冻结期间不消耗冰墙HP |
| **26** | 🌟 **寒霜护甲**：碰撞伤害+30% |
| **30** | 🌟 **极寒领域**：冰墙周围自动冻结一切 |

---

### 🕳 奇点引擎 (gravityWell)
**basePct 40.0（总能量）| CD 10000ms | Ch70解锁**

**基础效果**：发射黑洞吸引砖块向中心，每tick造成能量伤害+HP上限%伤害（上限baseAttack×15）。黑洞结束生成负能量砖块（累积能量伤害×转化率），负能量砖与正常砖接触触发湮灭爆炸。范围内禁止砖块融合

**默认分支**：
| 分支 | 名称 | 效果 | 最大等级 |
|------|------|------|----------|
| damage | 引力强化 | 吸力+20%/级，范围+12px/级 | 5 |
| negaEnergy | 负能量 | 黑洞结束生成负能量砖，转化率+10%/级 | 3 |
| horizon | 事件视界 | 每tick额外HP上限×2%/级伤害（需damage:2） | 2 |
| singularity | 奇点 | 持续+1.5s/级，中心30px伤害翻倍（需horizon:1） | 2 |
| count | 双星系统 | 同时+1个黑洞/级（需freq:1→改为默认） | 2 |

**商店解锁选项**：
| 商店Lv | 解锁分支 | 效果 |
|--------|----------|------|
| **2** | 暗物质 | 负能量体积+30%/级，存活时间无限（max 2） |
| **10** | 湮灭链 | 湮灭冲击波溅射，范围+20px/级（max 2） |
| **18** | 引力透镜 | 范围内能量伤害+12%/级，闪电链跳距+50%（max 2） |

**商店被动**：
| 商店Lv | 效果 |
|--------|------|
| **6** | 🌟 **虹吸**：引力范围内砖块受伤+20% |
| **14** | 🌟 **奇点爆发**：黑洞结束爆炸，造成累积伤害50% |
| **22** | 🌟 **引力倍增**：吸力×2 |
| **26** | 🌟 **双星系统**：同时+1个黑洞 |
| **30** | 🌟 **超级黑洞**：持续×2+可吸收弹幕 |

---

### ✈ 飞机 (ship)

**基础效果**：自动向上射子弹，手指拖拽左右移动。元素弹三选一互斥（🔥火焰弹/❄寒冰弹/⚡雷电弹）

**默认分支**：
| 分支 | 名称 | 效果 | 最大等级 |
|------|------|------|----------|
| attack | 子弹伤害 | +50%子弹伤害 | 5 |
| spread | 散射弹道 | +1子弹散射数 | 3 |
| pierce | 穿透弹 | 子弹穿透+1层 | 5 |
| wallBounce | 边界反弹 | 碰墙反弹+25%伤 | 3 |
| ricochet | 弹射反弹 | 碰砖弹向附近目标+1（需wallBounce:1） | 3 |
| fireBullet | 🔥火焰弹 | 命中附灼烧DOT（互斥） | 3 |
| iceBullet | ❄寒冰弹 | 命中叠冰缓，满5层冻结（互斥） | 3 |
| thunderBullet | ⚡雷电弹 | 命中感电，受伤概率电弧（互斥） | 3 |
| 各元素进阶 | | 火蔓延/冰碎裂/雷电场等（需对应元素） | 2 |

**商店解锁选项**：
| 商店Lv | 解锁分支 | 效果 |
|--------|----------|------|
| **2** | 散射+ | +1散射弹道 |
| **10** | 弹幕风暴 | 每3秒全屏散射（max 3） |
| **18** | 弹壁反弹 | 碰墙反弹+25%伤（max 3） |

**商店被动**：
| 商店Lv | 效果 |
|--------|------|
| **6** | 🌟 **穿透+1**：子弹默认穿透+1 |
| **14** | 🌟 **元素亲和**：元素弹伤害+30% |
| **22** | 🌟 **弹射**：碰砖后弹向附近目标 |
| **26** | 🌟 **散射+1**：额外+1散射弹道 |
| **30** | 🌟 **超频引擎**：射速额外+50% |

---

## 四、战斗内三选一改动

### 去掉的选项（改由外部养成提供）
- ❌ 所有武器的 `freq`/`speed` 分支（CD/频率）
- ❌ 飞机的 `fireRate` 分支（射速）

### 分支门控
- **默认可选**：上面"默认分支"表中的所有分支（含requires前置门控）
- **商店解锁**：Lv2/10/18各解锁1个，未到等级不出现在三选一池

---

## TODO
- [ ] Vin 审核各武器：默认分支是否合理、商店解锁选项选得对不对、被动效果
- [ ] 确认数值曲线参数
- [ ] 实装代码重构
- [ ] 更新模拟器
